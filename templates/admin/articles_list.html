{% extends "admin/base.html" %}
{% block title %}–°—Ç–∞—Ç—å–∏ ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block admin_content %}
<div class="admin-page">
    <div class="admin-page__header">
        <div class="admin-page__header-row">
            <div>
                <h1>–°—Ç–∞—Ç—å–∏</h1>
                <p>{{ articles|length }} —Å—Ç–∞—Ç–µ–π</p>
            </div>
            <a href="{{ url_for('admin_article_new') }}" class="admin-btn admin-btn--primary">+ –ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è</a>
        </div>
    </div>

    {% if articles %}
    <div class="admin-table">
        <table>
            <thead>
                <tr>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>Slug</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for art in articles %}
                <tr>
                    <td><strong>{{ art.title }}</strong></td>
                    <td><code>{{ art.slug }}</code></td>
                    <td>
                        {% if art.published %}
                        <span class="admin-badge admin-badge--success">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞</span>
                        {% else %}
                        <span class="admin-badge admin-badge--draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                        {% endif %}
                    </td>
                    <td class="admin-table__actions">
                        <a href="{{ url_for('admin_article_edit', slug=art.slug) }}" class="admin-btn admin-btn--sm">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <form method="POST" action="{{ url_for('admin_article_delete', slug=art.slug) }}" style="display:inline" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é?')">
                            <button type="submit" class="admin-btn admin-btn--sm admin-btn--danger">–£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="admin-empty">
        <p>–°—Ç–∞—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        <a href="{{ url_for('admin_article_new') }}" class="admin-btn admin-btn--primary">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é</a>
    </div>
    {% endif %}

    <!-- ‚ïê‚ïê‚ïê Articles CTA ‚ïê‚ïê‚ïê -->
    <form method="POST" class="admin-form" style="margin-top: 2rem;">
        <div class="admin-form__section">
            <h3>üì¢ CTA-—Å–µ–∫—Ü–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç–µ–π</h3>
            <div class="admin-field">
                <label for="cta_title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="cta_title" name="cta_title" value="{{ content.articles_cta.title }}">
            </div>
            <div class="admin-field">
                <label for="cta_text">–¢–µ–∫—Å—Ç</label>
                <textarea id="cta_text" name="cta_text" rows="2">{{ content.articles_cta.text }}</textarea>
            </div>
            <div class="admin-field">
                <label for="cta_button_text">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                <input type="text" id="cta_button_text" name="cta_button_text" value="{{ content.articles_cta.button_text }}">
            </div>
        </div>
        <button type="submit" class="admin-btn admin-btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å CTA</button>
    </form>
</div>
{% endblock %}
